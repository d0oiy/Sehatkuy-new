{% extends 'base.html' %}
{% load static %}

{% block title %}{{ article.title }} - Sehatkuy{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row">
    <div class="col-lg-8">
      <article class="article-detail">
        <nav aria-label="breadcrumb" class="mb-4">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'articles:list' %}">Artikel</a></li>
            <li class="breadcrumb-item active">{{ article.title|truncatewords:5 }}</li>
          </ol>
        </nav>

        <h1 class="display-5 fw-bold mb-3">{{ article.title }}</h1>
        
        <div class="article-meta mb-4 d-flex align-items-center gap-3 text-muted small">
          <span><i class="bi bi-person"></i> {{ article.author.get_full_name|default:article.author.username }}</span>
          <span><i class="bi bi-calendar"></i> {{ article.created_at|date:"d F Y" }}</span>
          <span><i class="bi bi-eye"></i> {{ article.views_count }} views</span>
        </div>

        {% if article.image %}
          <img src="{{ article.image.url }}" class="img-fluid rounded mb-4" alt="{{ article.title }}" style="max-height: 400px; width: 100%; object-fit: cover;">
        {% endif %}

        {% if article.excerpt %}
          <div class="alert alert-info mb-4">
            <strong>Ringkasan:</strong> {{ article.excerpt }}
          </div>
        {% endif %}

        <div class="article-content">
          {{ article.content|linebreaks }}
        </div>
      </article>
    </div>

    <div class="col-lg-4">
      <div class="sticky-top" style="top: 20px;">
        <!-- Artikel Terkait -->
        {% if related_articles %}
          <div class="card mb-4">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">ðŸ“– Artikel Terkait</h5>
            </div>
            <div class="list-group list-group-flush">
              {% for related in related_articles %}
                <a href="{% url 'articles:detail' related.slug %}" class="list-group-item list-group-item-action">
                  <h6 class="mb-1">{{ related.title }}</h6>
                  <small class="text-muted">{{ related.created_at|date:"d M Y" }}</small>
                </a>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- CTA -->
        <div class="card bg-success text-white">
          <div class="card-body text-center">
            <h5 class="card-title">Butuh Konsultasi?</h5>
            <p class="card-text">Konsultasikan kesehatan Anda dengan dokter profesional</p>
            {% if user.is_authenticated %}
              <a href="{% url 'consultation:consultation_dashboard' %}" class="btn btn-light">Konsultasi Sekarang</a>
            {% else %}
              <a href="{% url 'login' %}" class="btn btn-light">Masuk untuk Konsultasi</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .article-content {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
  }
  .article-content p {
    margin-bottom: 1.5rem;
  }
  .article-content img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1.5rem 0;
  }
</style>
{% endblock %}

